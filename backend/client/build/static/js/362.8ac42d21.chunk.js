"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[362],{7362:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var s=n(3216),a=n(3003),o=n(5043),i=n(8015),l=n(3768),r=n(9379),c=n(9722),d=n(5989),u=n.n(d),p=n(5475);const m="data:image/png;base64,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";var h=n(6326),x=n(7574),b=n(591),y=n(782),g=n(7877),f=n(6221),v=n(2679),j=n(8595),N=n(1052),w=n(1939),A=n(7936),k=n(579);const C={default:"/style.css",retro:"/css.css"};function S(){var e,t;const n={"Content-Type":"application/json","pos-token":localStorage.getItem("pos-token")},[i,d]=(0,o.useState)(!1),S=(0,s.g)(),{data:D}=(0,N.I9)(),[I,O]=(0,o.useState)({x:window.screen.availWidth/4,y:window.screen.availHeight/2}),[Q,T]=(0,o.useState)(!1),[R,U]=(0,o.useState)({x:0,y:0}),[B,F]=(0,o.useState)("default"),H=(0,o.useRef)(null),[P,E]=(0,o.useState)(null!==(e=localStorage.getItem("_keyboard_scale"))&&void 0!==e?e:1.2),G=e=>{T(!0),U({x:e.clientX-I.x,y:e.clientY-I.y})},M=e=>{Q&&O({x:e.clientX-R.x,y:e.clientY-R.y})},W=()=>T(!1),q={marginTop:".5rem",alignItems:"center",borderRadius:"10px",minHeight:"20px",border:"2px dashed",backgroundColor:"#fff",position:"relative"},L=e=>{e.stopPropagation(),e.preventDefault();const t=e.target.dataset.id;c.A.get("config/notification/delete/".concat(t)).then((e=>{let{data:n}=e;console.log(n),n.status&&Ue(N.S5.util.updateQueryData("getNotifications",void 0,(e=>{e.notifications=e.notifications.filter((e=>e.id!==parseInt(t)))})))}))},[Y,K]=(0,o.useState)(null!==(t=null===D||void 0===D?void 0:D.notifications)&&void 0!==t?t:[]);(0,o.useEffect)((()=>{var e;K(null!==(e=null===D||void 0===D?void 0:D.notifications)&&void 0!==e?e:[])}),[D]);const Z=(0,o.useRef)(null),X=(0,s.zy)(),{setSearchQuery:z,searchQuery:V,sessions:J,setSession:_,activeSession:$,setActiveSession:ee,displayImage:te,handleImageDisplay:ne,sale:se,setType:ae,setFocused:oe,focused:ie}=(0,h.S)(),[le,re]=(0,o.useState)(!1),ce="/dashboard"!==X.pathname,{cartProducts:de,split:ue,currency:pe,appKey:me,inventory:he,categories:xe,theme:be,hasKeyboard:ye,allProds:ge}=(0,a.d4)((e=>e.auth)),[fe,ve]=(0,o.useState)(ye),[je,Ne]=(0,o.useState)(be);(0,o.useEffect)((()=>{const e=document.getElementById("switcher");e&&(e.href=C[je])}),[je]);const[we,Ae]=(0,o.useState)(he),[ke,Ce]=(0,o.useState)(me),[Se,De]=(0,o.useState)(!1),[Ie,Oe]=(0,o.useState)(0),[Qe]=(0,o.useState)(1),[Te,Re]=(0,o.useState)([]),Ue=(0,a.wA)(),Be=(0,s.Zp)(),Fe=async e=>{e.preventDefault();try{if(!me&&!ke)return d(!0),re(!le);let e=ke||me;Ue({type:"SET_APP_KEY",payload:e}),Ue({type:"LOADING"});const{data:t}=await c.A.get("https://pos.dftech.in/sync-products/".concat(e));if(t.status){l.Ay.success(t.message);let e=new FormData;const n=(0,j.Xz)("data:application/json;base64,"+t.file,"client.json");e.append("file",n);const{data:s}=await c.A.post("products/sync",e,{headers:{Accept:"application/json","Content-Type":"multipart/form-data","pos-token":localStorage.getItem("pos-token")}});s.status&&(l.Ay.success("Importing completed"),setTimeout((()=>window.location.reload()),2400))}else l.Ay.error(t.message),d(!0),re(!le||"true")}catch(t){"ERR_NETWORK"===t.code?l.Ay.error("No internet connection!"):l.Ay.error("Couldn't fetch products right now!"),d(!0),re(!le||"true")}Ue({type:"STOP_LOADING"})},[He,Pe]=(0,o.useState)("");(0,o.useEffect)((()=>{var e;null===(e=H.current)||void 0===e||e.setInput(He)}),[He]),(0,o.useEffect)((()=>(z(V),()=>z(""))),[V,z]);return(0,o.useEffect)((()=>(ee(J[0]),()=>ee(J[0]))),[J]),S&&"customer"===S.type?null:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("nav",{className:"navbar default-layout col-lg-12 col-12 p-0 d-flex align-items-top flex-row no-print",style:{zIndex:999},children:[ce&&(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:"text-center navbar-brand-wrapper d-flex align-items-center justify-content-start",children:[(0,k.jsx)("div",{className:"me-3",children:(0,k.jsx)(p.N_,{to:"/dashboard",className:"nav-link",children:(0,k.jsx)("i",{className:"mdi mdi-home menu-icon fs-3"})})}),(0,k.jsx)("div",{})]})}),(0,k.jsxs)("div",{className:"navbar-menu-wrapper d-flex align-items-top",style:{width:ce?"":"100%"},children:[ce&&(-1===X.pathname.indexOf("/pos")?(0,k.jsx)("li",{className:"navbar-nav nav-item",children:(0,k.jsx)("button",{className:"btn btn-sm",onClick:()=>Be(-1),children:(0,k.jsx)("i",{style:{fontSize:"1.8rem"},className:"mdi mdi-arrow-left"})})}):(0,k.jsx)("button",{className:"btn btn-sm btn-".concat(se?"success":"warning"),onClick:e=>{let t=!se;localStorage.setItem("_is_sale",t),ae(t)},children:se?"Selling":"Returning"})),["/pos","/pos/","/payment"].includes(X.pathname)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("li",{className:"navbar-nav nav-item ms-3",onClick:()=>{var e;localStorage.setItem("cartSessions",JSON.stringify([...J,J[J.length-1]+1])),_([...J,J[J.length-1]+1]),null===(e=window.electronAPI)||void 0===e||e.reloadWindow({manual:!0})},children:(0,k.jsx)("div",{className:"box",children:" + "})}),(0,k.jsx)("ul",{className:"navbar-nav ms-1 sessions",children:J.map((e=>(0,k.jsx)("li",{className:"nav-item fw-semibold ms-1",onClick:()=>{var t;ee(e),null===(t=window.electronAPI)||void 0===t||t.reloadWindow({manual:!0})},children:(0,k.jsxs)("div",{className:"box ".concat($===e?"active":""),children:[" ",e," "]})},e)))}),(0,k.jsx)("button",{className:"btn ".concat(ue?"btn-success":"btn-outline-success"," btn-sm ms-2 split-btn text-dark"),type:"button",onClick:()=>{let e=document.querySelector(".split-btn");Ue({type:"SPLIT",payload:e.classList.contains("btn-outline-success")})},title:"Split products",children:"Split Products"}),(0,k.jsx)("button",{className:"btn btn-outline-success btn-light btn-sm ms-2 quick-btn text-dark",type:"button",onClick:()=>{Ue({type:"LOADING"}),De(!Se),c.A.get("orders/last-order").then((e=>{var t;let{data:n}=e;const{products:s,session:a}=n,o=JSON.parse(a.data);Oe(n.order.amount);let i=Object.values(s).map((e=>(0,r.A)((0,r.A)({},e),{},{stock:null===o||void 0===o?void 0:o.quantity[e.id]})));if(-1!==(null!==(t=null===o||void 0===o?void 0:o.products)&&void 0!==t?t:[]).indexOf("quick")){let e=i.reduce(((e,t)=>{var n;return e+parseFloat((null!==(n=null===o||void 0===o?void 0:o.price[t.id])&&void 0!==n?n:t.price)*(null===o||void 0===o?void 0:o.quantity[t.id]))}),0),t=n.order.amount-e;i=[...i,{name:"Others",price:t,id:"quick",stock:null===o||void 0===o?void 0:o.quantity.quick}]}Re(i.map((e=>{var t,n;return xe[e.category_id]&&(e.isVeg=!0),e.prices=null!==(t=o.price)&&void 0!==t?t:{},e.units=null!==(n=o.unit)&&void 0!==n?n:{},e})))})).catch().finally((()=>Ue({type:"STOP_LOADING"})))},children:"Last Receipt"}),(0,k.jsx)("button",{className:"btn btn-outline-success btn-light btn-sm ms-2 quick-btn text-dark",type:"button",onClick:e=>{var t,n,s;e.preventDefault(),Ue({type:"CHOOSEN_PRODUCT",payload:(0,r.A)((0,r.A)({},de),{},{[$]:[...null!==(t=de[$])&&void 0!==t?t:[],{id:"quick",name:"Others",price:0,stock:1,other:!0,weight:null}]})}),null===(n=window.electronAPI)||void 0===n||n.reloadWindow((0,r.A)((0,r.A)({},de),{},{[$]:[...null!==(s=de[$])&&void 0!==s?s:[],{id:"quick",name:"Others",price:0,stock:1,other:!0,weight:null}]}))},title:"Quick add product to cart",children:"Quick Add"}),(0,k.jsx)("button",{className:"btn btn-outline-success btn-light btn-sm ms-2 quick-btn text-dark",type:"button",onClick:()=>{var e,t;console.log("opening cash drawer..."),null===(e=window)||void 0===e||null===(t=e.electronAPI)||void 0===t||t.drawCash()},children:"Open drawer"})]}),X.pathname.includes("/payment/")&&(0,k.jsx)("button",{className:"btn btn-outline-success btn-light btn-sm ms-2 quick-btn text-dark",type:"button",onClick:()=>{var e,t;console.log("opening cash drawer..."),null===(e=window)||void 0===e||null===(t=e.electronAPI)||void 0===t||t.drawCash()},children:"Open drawer"}),"/products"===X.pathname&&(0,k.jsx)(p.N_,{to:"/product/create",className:"btn-success btn btn-md btn-rounded",children:" New "}),(0,k.jsxs)("ul",{className:"navbar-nav ms-auto",children:[(0,k.jsxs)("li",{className:"nav-item d-flex align-items-center",children:["default"===be&&"/pos"===X.pathname&&(0,k.jsxs)("button",{className:"btn btn-rounded btn-sm btn-warning fs-4",onClick:()=>ne(!te),children:[te?"Hide":"Show"," Images"]}),(0,k.jsx)("button",{className:"btn",onClick:()=>window.location.reload(),title:"Refresh",children:(0,k.jsx)("i",{style:{fontSize:"2rem"},className:"mdi mdi-refresh"})})]}),"/pos"===X.pathname&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("li",{className:"nav-item",onClick:()=>oe(!ie),children:(0,k.jsxs)("form",{className:"search-form",action:"#",children:[(0,k.jsx)("i",{className:"fa fa-search"}),(0,k.jsx)("input",{type:"search",className:"form-control",value:V,placeholder:"Search Here",title:"Search here",style:ie?{backgroundColor:"transparent",borderBottom:"1px solid #212121",borderRadius:0,paddingLeft:"30px",cursor:"text",outline:0,width:"140px"}:{},onInput:e=>z(e.target.value)})]})})}),(0,k.jsxs)("li",{className:"nav-item dropdown",children:[(0,k.jsxs)(p.N_,{className:"nav-link count-indicator",id:"notificationDropdown",href:"#","data-bs-toggle":"dropdown",children:[(0,k.jsx)("i",{className:"mdi mdi-bell"}),Y.length?(0,k.jsx)("span",{className:"count"}):null]}),(0,k.jsxs)("div",{className:"dropdown-menu dropdown-menu-right navbar-dropdown preview-list pb-0","aria-labelledby":"notificationDropdown",style:{borderRadius:8},children:[(0,k.jsxs)(p.N_,{className:"dropdown-item py-3 border-bottom",children:[(0,k.jsxs)("p",{className:"mb-0 fw-medium float-start",children:[" You have ",Y.length+(Y.length>1?" notifications":" notification"),"  "]}),(0,k.jsx)("span",{className:"badge badge-pill badge-primary float-end",onClick:e=>{e.stopPropagation(),e.preventDefault(),c.A.get("config/clear-notifications",{headers:n}).then((e=>{let{data:t}=e;t.status&&Ue(N.S5.util.updateQueryData("getNotifications",void 0,(e=>{e.notifications=[]})))}))},children:" Clear all "})]}),Y.map((e=>(0,k.jsxs)(p.N_,{className:"dropdown-item preview-item py-2 position-relative","data-id":e.id,children:[(0,k.jsx)("div",{className:"preview-thumbnail",children:(0,k.jsx)("i",{className:"mdi mdi-alert m-auto text-primary"})}),(0,k.jsxs)("div",{className:"preview-item-content",children:[(0,k.jsx)("h5",{className:"preview-subject fw-normal text-dark mb-1",children:e.content}),(0,k.jsx)("p",{className:"fw-light small-text mb-0"})]}),(0,k.jsx)("span",{onClick:L,"data-id":e.id,className:"fa fa-close align-items-center position-absolute align-self-center",style:{right:20}})]},e.id)))]})]}),(0,k.jsxs)("li",{className:"nav-item dropdown d-none d-lg-block user-dropdown",children:[(0,k.jsx)(p.N_,{className:"nav-link",id:"UserDropdown",to:"#","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,k.jsx)("img",{className:"img-xs rounded-circle",src:m,alt:""})}),(0,k.jsxs)("div",{className:"dropdown-menu dropdown-menu-right navbar-dropdown","aria-labelledby":"UserDropdown",style:{borderRadius:8},children:[(0,k.jsxs)("div",{className:"dropdown-header text-center",children:[(0,k.jsx)("img",{className:"img-md rounded-circle",src:m,alt:""}),(0,k.jsx)("p",{className:"mb-1 mt-3 fw-bold",children:" JB "}),(0,k.jsx)("p",{className:"fw-light text-muted mb-0",children:" Admin "})]}),(0,k.jsxs)(p.N_,{className:"dropdown-item d-flex",style:{justifyContent:"space-between"},to:"#",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("i",{className:"dropdown-item-icon mdi mdi-package-variant-closed-plus text-primary me-2"})," Inventory"]}),(0,k.jsxs)("div",{onClick:async()=>{let e=!we;Ue({type:"LOADING"});try{const{data:t}=await c.A.get("config/inventory/".concat(e),{headers:n});t.status?(Ae(e),Ue({type:"INVENTORY_IS",payload:e}),l.Ay.success("Inventory is switched ".concat(e?"on":"off","!")),Ue({type:"RESET_KART"})):l.Ay.error("Didn't worked!")}catch(t){l.Ay.error("Didn't worked!")}Ue({type:"STOP_LOADING"})},children:[(0,k.jsx)("input",{type:"checkbox",style:{display:"none"},id:"btn1999",checked:we,onChange:()=>{},className:"status"}),(0,k.jsx)("label",{htmlFor:"btn1999"}),(0,k.jsx)("div",{className:"plate"})]})]}),(0,k.jsxs)(p.N_,{className:"dropdown-item d-flex",style:{justifyContent:"space-between"},to:"#",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("i",{className:"dropdown-item-icon mdi mdi-keyboard text-primary me-2"})," Keyboard"]}),(0,k.jsxs)("div",{onClick:()=>{let e=!fe;ve(e),Ue({type:"KEYBOARD",payload:e}),l.Ay.success("Keyboard status updated!")},children:[(0,k.jsx)("input",{type:"checkbox",style:{display:"none"},id:"btn1991",checked:fe,onChange:()=>{},className:"status"}),(0,k.jsx)("label",{htmlFor:"btn1991"}),(0,k.jsx)("div",{className:"plate"})]})]}),(0,k.jsxs)(p.N_,{to:"#",className:"dropdown-item",onClick:()=>{let e="default"===be?"retro":"default";Ne(e),Ue({type:"THEME",payload:e})},children:[(0,k.jsx)("i",{className:"dropdown-item-icon mdi mdi-brightness-6 text-primary me-2"}),"Switch Theme"]}),(0,k.jsxs)(p.N_,{to:"#",className:"dropdown-item",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("i",{className:"dropdown-item-icon mdi mdi-tray-full text-primary me-2"}),"All Products"]}),(0,k.jsxs)("div",{onClick:()=>{Ue({type:"WITH_ALL_PRODUCTS",payload:!ge}),l.Ay.success("Products status updated!")},children:[(0,k.jsx)("input",{type:"checkbox",style:{display:"none"},id:"btn1931",checked:ge,onChange:()=>{},className:"status"}),(0,k.jsx)("label",{htmlFor:"btn1931"}),(0,k.jsx)("div",{className:"plate"})]})]}),(0,k.jsxs)(p.N_,{className:"dropdown-item",to:"#",onClick:Fe,children:[(0,k.jsx)("i",{className:"dropdown-item-icon mdi mdi-download text-primary me-2"}),"Sync Products"]}),(0,k.jsxs)(p.N_,{className:"dropdown-item",to:"#",onClick:async e=>{e.preventDefault();try{Ue({type:"LOADING"});const{data:e}=await c.A.get("install-update");if(e.status){try{const{data:e}=await c.A.get("install-backend-update");e.status&&l.Ay.success(e.message)}catch(t){console.log("failed installing backend.",t)}l.Ay.success(e.message),setTimeout((()=>{var e;return null===(e=window)||void 0===e?void 0:e.electronAPI.relaunch()}),2e3)}else console.log(e),e.relaunch?(l.Ay.success("Update downloaded, click again to install updates!"),setTimeout((()=>{var e;return null===(e=window)||void 0===e?void 0:e.electronAPI.relaunch()}),2e3)):l.Ay.error(e.message)}catch(n){console.log(n),"ERR_NETWORK"===n.code?l.Ay.error("No internet connection!"):l.Ay.error("Something went wrong!")}Ue({type:"STOP_LOADING"})},children:[(0,k.jsx)("i",{className:"dropdown-item-icon mdi mdi-update text-primary me-2"}),"Update"]}),(0,k.jsxs)(p.N_,{className:"dropdown-item",to:"#",onClick:async()=>Ue({type:"LOGOUT"}),children:[(0,k.jsx)("i",{className:"dropdown-item-icon mdi mdi-power text-primary me-2"}),"Sign Out"]}),(0,k.jsxs)(p.N_,{className:"dropdown-item",to:"#",onClick:()=>{var e;null===(e=window.electronAPI)||void 0===e||e.closeApp()},children:[(0,k.jsx)("i",{className:"dropdown-item-icon mdi mdi-close text-primary me-2"}),"Quit"]})]})]})]}),(0,k.jsx)("button",{className:"navbar-toggler navbar-toggler-right d-lg-none align-self-center",type:"button","data-bs-toggle":"offcanvas",children:(0,k.jsx)("span",{className:"mdi mdi-menu"})})]})]}),-1!==X.pathname.indexOf("/pos")&&ie&&(0,k.jsx)(A.A,{pos:I.y}),(0,k.jsxs)(x.A,{isOpen:Se,children:[(0,k.jsx)(b.A,{children:(0,k.jsx)("p",{style:{fontSize:"1.5rem"},children:"Previous Order Details"})}),(0,k.jsx)(y.A,{children:(0,k.jsx)("div",{className:"col-lg-12",id:"receipt",children:(0,k.jsxs)("div",{className:"container",style:{backgroundColor:"white",paddingBottom:"10px",borderRadius:"15px",fontSize:"larger"},children:[(0,k.jsx)("div",{className:"row",style:{display:"flex",fontSize:"larger"},children:(0,k.jsx)("div",{className:"d-grid",style:{justifyContent:"center",textAlign:"center",width:"100%",display:"grid"},children:(0,k.jsx)("img",{src:w,alt:"",style:{filter:"grayscale(1)"},height:120})})}),(0,k.jsxs)("div",{className:"row",ref:Z,children:[(0,k.jsx)("div",{style:{width:"100%"},children:(0,k.jsx)("div",{style:{textAlign:"center",marginTop:10},children:(0,k.jsxs)("h5",{style:{textTransform:"uppercase",fontFamily:"Manrope, sans-serif"},children:[(0,k.jsx)("b",{style:{paddingTop:10},children:"\u260e: 070-3563062"}),(0,k.jsx)("br",{}),(0,k.jsx)("span",{children:"\ud83d\uded2"}),"Hobbemaplein 50 ",(0,k.jsx)("br",{})," 2526 JB Den Haag, Netherlands",(0,k.jsx)("br",{})]})})}),(0,k.jsxs)("div",{className:"receipt",style:{width:"100%",background:"#fff",fontFamily:"Manrope, sans-serif"},children:[Te.map(((e,t)=>(0,k.jsxs)("div",{className:"row",style:q,children:[(0,k.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"},children:[(0,k.jsx)("b",{style:{fontSize:e.name.length>35?"medium":"large",fontWeight:900,maxWidth:"80%",fontFamily:"Manrope, sans-serif"},children:e.name}),(0,k.jsx)("strong",{style:{whiteSpace:"nowrap",fontFamily:"Manrope, sans-serif"},children:pe+" "+parseFloat(e.prices[e.id]).toFixed(2)})]}),(0,k.jsxs)("div",{className:"toHide",style:{display:"flex",width:"100%",justifyContent:"space-between"},children:[(0,k.jsxs)("p",{style:{fontSize:"large",fontWeight:900,marginTop:".25rem",fontFamily:"Manrope, sans-serif"},children:[pe+" "+parseFloat(Math.abs(e.prices[e.id]/e.stock)).toFixed(2),"quick"!==e.id?e.units[e.id]?"/ ".concat(e.units[e.id]):"/ Units":null]}),(0,k.jsxs)("p",{style:{fontSize:"medium",fontWeight:900,marginTop:".25rem",fontFamily:"Manrope, sans-serif"},children:["Qty: ",e.isVeg?e.stock+e.units[e.id]:parseFloat(e.stock).toFixed(2)]})]})]},t))),(0,k.jsxs)("span",{style:{cssText:"font-size:1.75rem!important;font-weight:600;font-family:Manrope,sans-serif"},children:["TOTAL \xa0",pe+" "+parseFloat(Ie).toFixed(2)]})]}),(0,k.jsx)("div",{style:{width:"100%"},children:(0,k.jsx)("small",{style:{paddingTop:10,fontSize:"1rem",fontFamily:"Manrope, sans-serif"},children:"Thank you! Visit Again!"})})]})]})})}),(0,k.jsxs)(g.A,{children:[(0,k.jsx)("button",{className:"btn btn-light btn-rounded",onClick:()=>De(!Se),children:" Close "}),(0,k.jsx)("button",{className:"btn btn-primary btn-rounded",onClick:async()=>{const e=Z.current;if(!e)return l.Ay.error("Sorry can't go further...");try{var t;if(window.electronAPI)null===(t=window.electronAPI)||void 0===t||t.printContent({html:e.innerHTML,id:Qe});else(0,j.N5)("Printer not connected!")}catch(n){console.error("Error capturing image:",n)}},children:"Print"})]})]}),(0,k.jsx)(x.A,{isOpen:le,size:"sm",fade:!1,children:(0,k.jsxs)(f.A,{onSubmit:Fe,children:[(0,k.jsx)(b.A,{children:"Enter application key"}),(0,k.jsx)(y.A,{children:(0,k.jsx)(v.A,{onChange:e=>Ce(e.target.value),value:ke,type:"text",name:"appKey",onClick:e=>{d(!0),Pe(ke)}})}),(0,k.jsxs)(g.A,{children:[(0,k.jsx)("button",{className:"btn btn-light btn-sm btn-rounded",type:"button",onClick:()=>{re(!1),d(!1)},children:"Cancel"}),(0,k.jsx)("button",{className:"btn btn-success btn-sm btn-rounded",children:" Submit "})]})]})}),i&&!ye&&(0,k.jsx)("div",{className:"mt-4 position-fixed w-50",style:{zIndex:9999,top:60},children:(0,k.jsx)("div",{style:{overflow:"hidden",position:"relative",touchAction:"none"},onMouseMove:M,onTouchMove:M,onMouseUp:W,onTouchEnd:W,children:(0,k.jsxs)("div",{style:{position:"fixed",top:"".concat(I.y,"px"),left:"".concat(I.x,"px"),cursor:Q?"grabbing":"grab",zIndex:1e3,width:700,touchAction:"none",transform:"scale(".concat(P,")"),transformOrigin:"top center"},children:[(0,k.jsx)("div",{onMouseDown:G,onTouchStart:G,style:{background:"#444",color:"#fff",padding:10,cursor:"grab",textAlign:"center",touchAction:"none",borderRadius:"8px 8px 0 0"},children:"Hold To Drag"}),(0,k.jsx)(u(),{onChange:e=>Ce(e),onKeyPress:e=>{"{lock}"===e&&F((e=>"default"===e?"shift":"default"))},keyboardRef:e=>H.current=e,layout:{default:["1 2 3 4 5 6 7 8 9 0","q w e r t y u i o p","{lock} a s d f g h j k l","z x c v b n m {bksp}","{space}"],shift:["1 2 3 4 5 6 7 8 9 0","Q W E R T Y U I O P","{lock} A S D F G H J K L","Z X C V B N M {bksp}","{space}"]},layoutName:B}),(0,k.jsxs)("div",{className:"bg-white d-flex board-navs",style:{justifyContent:"space-between",padding:"5px 20px"},children:[(0,k.jsx)("button",{className:"btn btn-light btn-rounded",onClick:()=>{Ce(""),H.current.clearInput()},style:{border:"1px solid gray"},children:"CLEAR"}),(0,k.jsx)("button",{style:{border:"1px solid"},className:"btn btn-light btn-rounded",onClick:()=>{localStorage.setItem("_keyboard_scale",Math.max(P-.1,.5)),E((e=>Math.max(e-.1,.5)))},children:"-"}),(0,k.jsxs)("span",{style:{placeContent:"center"},children:[" ",Math.round(100*P),"% "]}),(0,k.jsx)("button",{style:{border:"1px solid"},className:"btn btn-light btn-rounded",onClick:()=>{localStorage.setItem("_keyboard_scale",Math.min(JSON.parse(P)+.1,2)),E((e=>Math.min(JSON.parse(e)+.1,2)))},children:"+"}),(0,k.jsx)("button",{onClick:()=>d(""),className:"btn btn-light btn-rounded",style:{border:"1px solid gray"},children:"HIDE"})]})]})})})]})}const D=(0,o.memo)(S),I=()=>{let e=(0,s.Zp)(),t=(0,s.zy)();const{userToken:n}=(0,a.d4)((e=>e.auth));let r=(0,a.d4)((e=>e.auth.loading)),c=n;const[d,u]=(0,o.useState)(r);return(0,o.useEffect)((()=>(u(r),()=>null)),[n,r,e]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.l$,{}),(0,k.jsx)("div",{className:"".concat(d?"layout-item":"layout-item d-none"),children:(0,k.jsx)(i.A,{type:"spinner-default",bgColor:"gray",color:"white",size:70})}),c&&(0,k.jsx)(D,{}),(0,k.jsx)("div",{className:"container1 page-body-wrapper w-100 ".concat("/dashboard"===t.pathname?"home":""),style:{minHeight:"/login"===t.pathname?0:"100vh",paddingTop:"/login"===t.pathname?0:76},children:(0,k.jsx)("div",{className:"".concat(["/pos","/pos/customer","/pos/"].includes(t.pathname)?"pos-panel":"main-panel"," w-100 ").concat("/login"===t.pathname?"login":""," ").concat(-1!==t.pathname.indexOf("payment")?"payment-screen":""),children:(0,k.jsx)(s.sv,{})})})]})}},7936:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(5043),a=n(5989),o=n.n(a),i=(n(527),n(6326)),l=n(3003),r=n(579);function c(){var e;const{setSearchQuery:t,focused:n,setFocused:a}=(0,i.S)(),{hasKeyboard:c}=(0,l.d4)((e=>e.auth)),[d,u]=(0,s.useState)({x:window.screen.availWidth/3.5,y:window.screen.availHeight/2.82}),[p,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)({x:0,y:0}),b=(0,s.useRef)(null),y=(0,s.useCallback)((e=>{var t,n,s,a;const o=(null===(t=e.touches)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.clientX)||e.clientX,i=(null===(s=e.touches)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.clientY)||e.clientY;m(!0),x({x:o-d.x,y:i-d.y})}),[d]),g=(0,s.useCallback)((e=>{var t,n,s,a;if(!p)return;const o=(null===(t=e.touches)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.clientX)||e.clientX,i=(null===(s=e.touches)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.clientY)||e.clientY;u({x:o-h.x,y:i-h.y})}),[p,h]),f=(0,s.useCallback)((()=>{m(!1)}),[]),[v,j]=(0,s.useState)(null!==(e=localStorage.getItem("_keyboard_scale"))&&void 0!==e?e:1);return c?null:(0,r.jsx)("div",{className:"mt-4 position-fixed w-50 v-keyboard",style:{zIndex:9999,top:60},children:(0,r.jsx)("div",{style:{overflow:"hidden",touchAction:"none",position:"relative"},onMouseMove:g,onTouchMove:g,onMouseUp:f,onTouchEnd:f,children:(0,r.jsxs)("div",{style:{position:"fixed",top:"".concat(d.y,"px"),left:"".concat(d.x,"px"),cursor:p?"grabbing":"grab",zIndex:1e3,width:700,resize:"both",overflow:"auto",touchAction:"none",transform:"scale(".concat(v,")"),transformOrigin:"top center"},children:[(0,r.jsx)("div",{onMouseDown:y,onTouchStart:y,style:{background:"#444",color:"#fff",padding:10,cursor:"grab",textAlign:"center",borderRadius:"8px 8px 0 0",touchAction:"none"},children:"Hold To Drag"}),(0,r.jsx)(o(),{onChange:e=>t(e),keyboardRef:e=>b.current=e,layout:{default:["1 2 3 4 5 6 7 8 9 0","q w e r t y u i o p","a s d f g h j k l","z x c v b n m {bksp}","{space}"]}}),(0,r.jsxs)("div",{className:"bg-white d-flex board-navs w-100",style:{justifyContent:"space-between",padding:"5px 20px"},children:[(0,r.jsx)("button",{className:"btn btn-light btn-rounded",onClick:()=>{t(""),b.current.clearInput()},style:{border:"1px solid gray"},children:"CLEAR"}),(0,r.jsx)("button",{style:{border:"1px solid"},className:"btn btn-light btn-rounded",onClick:()=>{localStorage.setItem("_keyboard_scale",Math.max(v-.1,.5)),j((e=>Math.max(e-.1,.5)))},children:"-"}),(0,r.jsxs)("span",{style:{placeContent:"center"},children:[" ",Math.round(100*v),"% "]}),(0,r.jsx)("button",{style:{border:"1px solid"},className:"btn btn-light btn-rounded",onClick:()=>{localStorage.setItem("_keyboard_scale",Math.min(JSON.parse(v)+.1,2)),j((e=>Math.min(JSON.parse(e)+.1,2)))},children:"+"}),(0,r.jsx)("button",{onClick:()=>a(!n),className:"btn btn-light btn-rounded",style:{border:"1px solid gray"},children:"HIDE"})]})]})})})}},8595:(e,t,n)=>{n.d(t,{C1:()=>d,E2:()=>l,N5:()=>i,Xz:()=>a,Y6:()=>u,f:()=>p,iv:()=>c,sN:()=>r,x5:()=>o});n(8613);var s=n(3768);const a=(e,t)=>{for(var n=e.split(","),s=n[0].match(/:(.*?);/)[1],a=atob(n[n.length-1]),o=a.length,i=new Uint8Array(o);o--;)i[o]=a.charCodeAt(o);return new File([i],t,{type:s})},o=e=>{if(!e)return e;if(e.includes(" ")){let t="";return e.split(" ").forEach((e=>{t+=" "+e.charAt(0).toUpperCase()+e.slice(1)})),t}return e.charAt(0).toUpperCase()+e.slice(1)},i=e=>(0,s.Ay)(e,{icon:"\u26a0\ufe0f",style:{borderRadius:"10px",background:"#333",color:"#fff"}}),l=e=>{if(!e||"object"==typeof e)return e;3===(e=e.replace(/^#/,"")).length&&(e=e.split("").map((e=>e+e)).join(""));return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)}},r=e=>{let t=l(e);if(void 0===t)return e;const{r:n,g:s,b:a}=t;return.299*n+.587*s+.114*a<128};function c(e,t){const n=[];if(!e)return[];arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&e.unshift({});for(let s=0;s<e.length;s+=t)n.push(e.slice(s,s+t));return n}const d=(e,t)=>{if((null===e||void 0===e?void 0:e.length)>t){return e.substring(0,t)+"..."}return e},u=e=>{const t=new Date(e),n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");String(t.getSeconds()).padStart(2,"0");return"".concat(n,"-").concat(s,"-").concat(a," ").concat(o,":").concat(i)},p=e=>parseFloat(e).toFixed(2)},1939:(e,t,n)=>{e.exports=n.p+"static/media/logo.2d2e09f65e21f53b1f9f.png"}}]);
//# sourceMappingURL=362.8ac42d21.chunk.js.map