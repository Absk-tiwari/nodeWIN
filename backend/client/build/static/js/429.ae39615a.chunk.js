"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[429],{8429:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var s=n(9379),a=n(5043),o=n(3768),r=n(9722),l=n(3003),d=n(7574),i=n(6221),c=n(591),h=n(782),u=n(9904),x=n(2327),m=n(7550),b=n(7493),p=n(2679),g=n(7877),j=n(1052),y=n(5989),A=n.n(y),v=n(579);function f(){var e;const[t,n]=(0,a.useState)({}),y=(0,l.wA)(),{currency:f}=(0,l.d4)((e=>e.auth)),[N,w]=(0,a.useState)([]),[S,k]=(0,a.useState)(!1),[C,I]=(0,a.useState)(null),{data:D,isSuccess:M}=(0,j.h3)(),O=()=>{F(null),k(!S)};(0,a.useEffect)((()=>{M&&w(D.notes)}),[D,M]);const[T,_]=(0,a.useState)({x:window.screen.availWidth/4,y:window.screen.availHeight/2}),[L,z]=(0,a.useState)(!1),[E,G]=(0,a.useState)({x:0,y:0}),R=e=>{z(!0),G({x:e.clientX-T.x,y:e.clientY-T.y})},H=e=>{L&&_({x:e.clientX-E.x,y:e.clientY-E.y})},P=()=>z(!1),[U,F]=(0,a.useState)(""),[J,X]=(0,a.useState)(null!==(e=localStorage.getItem("_keyboard_scale"))&&void 0!==e?e:1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"content-wrapper",children:(0,v.jsx)("div",{className:"d-grid mt-3",children:(0,v.jsx)("div",{id:"category",children:(0,v.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:(0,v.jsxs)("div",{className:"card",children:[(0,v.jsx)("div",{className:"card-header",children:(0,v.jsx)("button",{className:"btn btn-sm btn-success",onClick:O,children:" Add New"})}),(0,v.jsx)("div",{className:"card-body",children:(0,v.jsx)("div",{className:"table-responsive w-100 categoryTable",children:(0,v.jsxs)("table",{className:"table table-bordered",style:{borderRadius:10},children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"S.No"}),(0,v.jsx)("th",{children:"Amount"}),(0,v.jsx)("th",{children:"Image"}),(0,v.jsx)("th",{children:"Action"})]})}),(0,v.jsx)("tbody",{children:N.map(((e,t)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:++t}),(0,v.jsxs)("td",{children:[" ",f," ",e.amount," "]}),(0,v.jsx)("td",{children:(0,v.jsx)("img",{src:"http://localhost:5100/images/"+e.image,style:{borderRadius:0,height:60,width:100},alt:""})}),(0,v.jsx)("td",{children:(0,v.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>{return t=e.id,void(window.confirm("Are you sure?")&&(y({type:"LOADING"}),r.A.get("/notes/remove/".concat(t)).then((e=>{let{data:n}=e;console.log(n),w(N.filter((e=>e.id!==t)))})).catch((e=>{})).finally((()=>y({type:"STOP_LOADING"})))));var t},children:"Delete"})})]},e.id)))})]})})})]})})})})}),(0,v.jsx)(d.A,{isOpen:S,toggle:O,children:(0,v.jsxs)(i.A,{onSubmit:e=>{if(e.preventDefault(),F(null),!C)return o.Ay.error("Choose an image!");let n=new FormData;if(n.append("image",C),n.append("amount",t.amount-0),N.some((e=>parseInt(e.amount)===parseInt(t.amount))))return o.Ay.error("".concat(parseInt(t.amount)," note is already added!"));y({type:"LOADING"}),r.A.post("/notes/create",n,{headers:{Accept:"application/json","Content-Type":"multipart/form-data","pos-token":localStorage.getItem("pos-token")}}).then((e=>{let{data:t}=e;t.status&&(o.Ay.success("Note added!"),O()),w([...N,t.note])})).catch((e=>{var t,n;return o.Ay.error(null!==(t=null===(n=e.response)||void 0===n?void 0:n.responseText)&&void 0!==t?t:"Something went wrong!")})).finally((()=>y({type:"STOP_LOADING"})))},children:[(0,v.jsx)(c.A,{children:" Update Product "}),(0,v.jsx)(h.A,{children:(0,v.jsxs)(u.A,{children:[(0,v.jsx)(x.A,{children:(0,v.jsxs)(m.A,{children:[(0,v.jsx)(b.A,{children:" Amount "}),(0,v.jsx)(p.A,{type:"number",name:"amount",onClick:()=>F("amount"),pattern:"^\\d+(\\.\\d+)?$",onChange:e=>n((0,s.A)((0,s.A)({},t),{},{[e.target.name]:e.target.value})),value:t.amount})]})}),(0,v.jsx)(x.A,{children:(0,v.jsxs)(m.A,{children:[(0,v.jsx)(b.A,{children:" Image "}),(0,v.jsx)(p.A,{type:"file",accept:"image/*",onChange:e=>{F(null),I(e.target.files[0])}})]})})]})}),(0,v.jsxs)(g.A,{children:[(0,v.jsx)("button",{className:"btn btn-light btn-rounded",type:"button",onClick:O,children:"Close"}),(0,v.jsx)("button",{className:"btn btn-success btn-rounded",type:"submit",children:"Upload"})]})]})}),U&&(0,v.jsx)("div",{className:"mt-4 position-fixed w-50",style:{zIndex:9999,top:60},children:(0,v.jsx)("div",{style:{overflow:"hidden",position:"relative",touchAction:"none"},onMouseMove:H,onTouchMove:H,onMouseUp:P,onTouchEnd:P,children:(0,v.jsxs)("div",{style:{position:"fixed",top:"".concat(T.y,"px"),left:"".concat(T.x,"px"),cursor:L?"grabbing":"grab",zIndex:1e3,width:700,resize:"both",overflow:"auto",touchAction:"none",transform:"scale(".concat(J,")"),transformOrigin:"top center"},children:[(0,v.jsx)("div",{onMouseDown:R,onTouchStart:R,style:{background:"#444",color:"#fff",padding:10,cursor:"grab",textAlign:"center",borderRadius:"8px 8px 0 0",touchAction:"none"},children:"Hold To Drag"}),(0,v.jsx)(A(),{onChange:e=>n((0,s.A)((0,s.A)({},t),{},{amount:e})),layout:{default:["1 2 3","4 5 6","7 8 9","0  {bksp}"]},display:{"{bksp}":"x"}}),(0,v.jsxs)("div",{className:"bg-white d-flex board-navs",style:{justifyContent:"space-between",padding:"5px 20px"},children:[(0,v.jsx)("button",{className:"btn btn-light btn-rounded",onClick:()=>n((0,s.A)((0,s.A)({},t),{},{amount:""})),style:{border:"1px solid gray"},children:"CLEAR"}),(0,v.jsx)("button",{style:{border:"1px solid"},className:"btn btn-light btn-rounded",onClick:()=>{localStorage.setItem("_keyboard_scale",Math.max(J-.1,.5)),X((e=>Math.max(e-.1,.5)))},children:"-"}),(0,v.jsxs)("span",{children:[" Size: ",Math.round(100*J),"% "]}),(0,v.jsx)("button",{style:{border:"1px solid"},className:"btn btn-light btn-rounded",onClick:()=>{localStorage.setItem("_keyboard_scale",Math.min(JSON.parse(J)+.1,2)),X((e=>Math.min(JSON.parse(e)+.1,2)))},children:"+"}),(0,v.jsx)("button",{onClick:()=>F(!U),className:"btn btn-light btn-rounded",style:{border:"1px solid gray"},children:"HIDE"})]})]})})})]})}}}]);
//# sourceMappingURL=429.ae39615a.chunk.js.map