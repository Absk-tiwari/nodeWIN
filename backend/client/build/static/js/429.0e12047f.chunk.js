"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[429],{8429:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var n=s(9379),a=s(5043),l=s(3768),r=s(9722),d=s(3003),o=s(7574),i=s(6221),c=s(591),h=s(782),u=s(9904),x=s(2327),m=s(7550),b=s(7493),p=s(2679),j=s(7877),g=s(1052),y=s(5989),A=s.n(y),v=s(579);function f(){var e;const[t,s]=(0,a.useState)({}),y=(0,d.wA)(),{currency:f}=(0,d.d4)((e=>e.auth)),[N,w]=(0,a.useState)([]),[S,k]=(0,a.useState)(!1),[C,I]=(0,a.useState)(null),{data:D,isSuccess:O}=(0,g.h3)(),M=()=>k(!S);(0,a.useEffect)((()=>{O&&w(D.notes)}),[D,O]);const[_,T]=(0,a.useState)({x:window.screen.availWidth/3,y:window.screen.availHeight/3}),[L,z]=(0,a.useState)(!1),[G,R]=(0,a.useState)({x:0,y:0}),[E,F]=(0,a.useState)(""),[H,P]=(0,a.useState)(null!==(e=localStorage.getItem("_keyboard_scale"))&&void 0!==e?e:1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"content-wrapper",children:(0,v.jsx)("div",{className:"d-grid mt-3",children:(0,v.jsx)("div",{id:"category",children:(0,v.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:(0,v.jsxs)("div",{className:"card",children:[(0,v.jsx)("div",{className:"card-header",children:(0,v.jsx)("button",{className:"btn btn-sm btn-success",onClick:M,children:" Add New"})}),(0,v.jsx)("div",{className:"card-body",children:(0,v.jsx)("div",{className:"table-responsive w-100 categoryTable",children:(0,v.jsxs)("table",{className:"table table-bordered",style:{borderRadius:10},children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"S.No"}),(0,v.jsx)("th",{children:"Amount"}),(0,v.jsx)("th",{children:"Image"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{children:"Action"})]})}),(0,v.jsx)("tbody",{children:N.map(((e,t)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:++t}),(0,v.jsxs)("td",{children:[" ",f," ",e.amount," "]}),(0,v.jsx)("td",{children:(0,v.jsx)("img",{src:"http://localhost:5100/images/"+e.image,style:{borderRadius:0,width:60},alt:""})}),(0,v.jsxs)("td",{children:[(0,v.jsx)("input",{type:"checkbox",style:{display:"none"},id:"btn"+e.id,name:"status",defaultChecked:e.status,className:"status"}),(0,v.jsx)("label",{htmlFor:"btn"+e.id}),(0,v.jsx)("div",{className:"plate"})]}),(0,v.jsx)("td",{children:(0,v.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>{return t=e.id,void(window.confirm("Are you sure?")&&(y({type:"LOADING"}),r.A.get("/notes/remove/".concat(t)).then((e=>{let{data:s}=e;console.log(s),w(N.filter((e=>e.id!==t)))})).catch((e=>{})).finally((()=>y({type:"STOP_LOADING"})))));var t},children:"Delete"})})]},e.id)))})]})})})]})})})})}),(0,v.jsx)(o.A,{isOpen:S,toggle:M,children:(0,v.jsxs)(i.A,{onSubmit:e=>{if(console.log(t,N),e.preventDefault(),!C)return l.Ay.error("Choose an image!");let s=new FormData;if(s.append("image",C),s.append("amount",t.amount),N.some((e=>e.amount===t.amount)))return l.Ay.error("".concat(t.amount," note is already added!"));y({type:"LOADING"}),r.A.post("/notes/create",s,{headers:{Accept:"application/json","Content-Type":"multipart/form-data","pos-token":localStorage.getItem("pos-token")}}).then((e=>{let{data:t}=e;t.status&&(l.Ay.success("Note added!"),M()),w([...N,t.note])})).catch((e=>{var t,s;return l.Ay.error(null!==(t=null===(s=e.response)||void 0===s?void 0:s.responseText)&&void 0!==t?t:"Something went wrong!")})).finally((()=>y({type:"STOP_LOADING"})))},children:[(0,v.jsx)(c.A,{children:" Update Product "}),(0,v.jsx)(h.A,{children:(0,v.jsxs)(u.A,{children:[(0,v.jsx)(x.A,{children:(0,v.jsxs)(m.A,{children:[(0,v.jsx)(b.A,{children:" Amount "}),(0,v.jsx)(p.A,{type:"text",name:"amount",onClick:()=>F("amount"),onBlur:()=>F(null),pattern:"^\\d+(\\.\\d+)?$",onChange:e=>s((0,n.A)((0,n.A)({},t),{},{[e.target.name]:e.target.value})),value:t.amount})]})}),(0,v.jsx)(x.A,{children:(0,v.jsxs)(m.A,{children:[(0,v.jsx)(b.A,{children:" Image "}),(0,v.jsx)(p.A,{type:"file",accept:"image/*",onChange:e=>I(e.target.files[0])})]})})]})}),(0,v.jsxs)(j.A,{children:[(0,v.jsx)("button",{className:"btn btn-light btn-rounded",type:"button",onClick:M,children:"Close"}),(0,v.jsx)("button",{className:"btn btn-success btn-rounded",type:"submit",children:"Upload"})]})]})}),E&&(0,v.jsx)("div",{className:"mt-4 position-fixed w-50",style:{zIndex:9999,top:60},children:(0,v.jsx)("div",{style:{overflow:"hidden",position:"relative"},onMouseMove:e=>{L&&T({x:e.clientX-G.x,y:e.clientY-G.y})},onMouseUp:()=>z(!1),children:(0,v.jsxs)("div",{style:{position:"fixed",top:"".concat(_.y,"px"),left:"".concat(_.x,"px"),cursor:L?"grabbing":"grab",zIndex:1e3,width:700,resize:"both",overflow:"auto",transform:"scale(".concat(H,")"),transformOrigin:"top center"},children:[(0,v.jsx)("div",{onMouseDown:e=>{z(!0),R({x:e.clientX-_.x,y:e.clientY-_.y})},style:{background:"#444",color:"#fff",padding:"5px 10px",cursor:"grab",textAlign:"center",borderRadius:"8px 8px 0 0"},children:"Hold To Drag"}),(0,v.jsx)(A(),{onChange:e=>s((0,n.A)((0,n.A)({},t),{},{amount:e})),layout:{default:["1 2 3 4 5 6 7 8 9 0 {bksp}"]}}),(0,v.jsxs)("div",{className:"bg-white d-flex board-navs",style:{justifyContent:"space-between",padding:"5px 20px"},children:[(0,v.jsx)("button",{className:"btn btn-light btn-rounded",onClick:()=>s((0,n.A)((0,n.A)({},t),{},{amount:""})),style:{border:"1px solid gray"},children:"CLEAR"}),(0,v.jsx)("button",{style:{border:"1px solid"},className:"btn btn-light btn-rounded",onClick:()=>{localStorage.setItem("_keyboard_scale",Math.max(H-.1,.5)),P((e=>Math.max(e-.1,.5)))},children:"-"}),(0,v.jsxs)("span",{children:[" Size: ",Math.round(100*H),"% "]}),(0,v.jsx)("button",{style:{border:"1px solid"},className:"btn btn-light btn-rounded",onClick:()=>{localStorage.setItem("_keyboard_scale",Math.min(JSON.parse(H)+.1,2)),P((e=>Math.min(JSON.parse(e)+.1,2)))},children:"+"}),(0,v.jsx)("button",{onClick:()=>F(!E),className:"btn btn-light btn-rounded",style:{border:"1px solid gray"},children:"HIDE"})]})]})})})]})}}}]);
//# sourceMappingURL=429.0e12047f.chunk.js.map